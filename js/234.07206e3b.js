"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[234],{60709:function(t,e,o){o.r(e),o.d(e,{default:function(){return D}});var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("b-card",{attrs:{"no-body":""}},[o("b-card-header",[o("b-card-title",[t._v(" #"+t._s(t.proposal.id)+" "),1==t.proposal.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-info"}},[t._v(" Deposit ")]):t._e(),2==t.proposal.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-primary"}},[t._v(" Voting ")]):t._e(),3==t.proposal.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-success"}},[t._v(" Passed ")]):t._e(),4==t.proposal.status?o("b-badge",{staticClass:"text-right",attrs:{pill:"",variant:"light-danger"}},[t._v(" Rejected ")]):t._e(),t._v(" "+t._s(t.proposal.title)+" ")],1)],1),o("b-card-body",[o("b-table-simple",{attrs:{stacked:"sm",hover:"",striped:""}},[o("tbody",[o("b-tr",[o("b-td",{staticStyle:{"text-transform":"capitalize","vertical-align":"top",width:"200px"}},[t._v(" "+t._s(t.$t("proposal_id"))+" ")]),o("b-td",[t._v(t._s(t.proposal.id))])],1),o("b-tr",[o("b-td",[t._v(" "+t._s(t.$t("proposal_proposer"))+" ")]),o("b-td",[o("router-link",{attrs:{to:"../account/"+t.proposer.proposer}},[t._v(" "+t._s(t.formatAddress(t.proposer.proposer))+" ")])],1)],1),o("b-tr",[o("b-td",[t._v(" "+t._s(t.$t("proposal_total_deposit"))+" ")]),o("b-td",[t._v(t._s(t.formatToken(t.proposal.total_deposit))+" ")])],1),o("b-tr",[o("b-td",[t._v(" "+t._s(t.$t("proposal_submit_time"))+" ")]),o("b-td",[t._v(t._s(t.formatDate(t.proposal.submit_time)))])],1),o("b-tr",[o("b-td",[t._v(" "+t._s(t.$t("voting_time"))+" ")]),o("b-td",[t._v(t._s(t.formatDate(t.proposal.voting_start_time))+" - "+t._s(t.formatDate(t.proposal.voting_end_time)))])],1)],1)]),o("div",[o("object-field-component",{attrs:{tablefield:t.proposal.contents,small:!1}})],1),t.proposal.type.indexOf("SoftwareUpgrade")>0?o("b-table-simple",[o("b-tr",[o("b-td",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("upgrade_time"))+" "+t._s(t.upgradeTime)+" "),o("flip-countdown",{attrs:{deadline:t.upgradeTime}})],1)],1)],1):t._e()],1),o("b-card-footer",[o("router-link",{attrs:{to:t.from}},[o("b-button",{attrs:{variant:"outline-primary"}},[t._v(" "+t._s(t.$t("btn_back_list"))+" ")])],1),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"btn float-right mg-2",attrs:{disabled:2!=t.proposal.status,variant:"primary"},on:{click:function(e){return t.openModal("Vote")}}},[t._v(" "+t._s(t.$t("btn_vote"))+" ")])],1)],1),o("b-card",{attrs:{"no-body":""}},[o("b-card-header",[o("b-card-title",[t._v(" Votes ")])],1),o("b-card-body",[o("b-progress",{staticClass:"mb-2",attrs:{max:100,height:"2rem","show-progress":""}},[o("b-progress-bar",{attrs:{id:"vote-yes"+t.proposal.id,variant:"success",value:t.percent(t.proposal.tally.yes),label:t.percent(t.proposal.tally.yes).toFixed()+"%","show-progress":""}}),o("b-progress-bar",{attrs:{id:"vote-no"+t.proposal.id,variant:"warning",value:t.percent(t.proposal.tally.no),label:t.percent(t.proposal.tally.no).toFixed()+"%","show-progress":""}}),o("b-progress-bar",{attrs:{id:"vote-veto"+t.proposal.id,variant:"danger",value:t.percent(t.proposal.tally.veto),label:t.percent(t.proposal.tally.veto).toFixed()+"%","show-progress":""}}),o("b-progress-bar",{attrs:{id:"vote-abstain"+t.proposal.id,variant:"info",value:t.percent(t.proposal.tally.abstain),label:t.percent(t.proposal.tally.abstain).toFixed()+"%","show-progress":""}})],1),o("b-tooltip",{attrs:{target:"vote-yes"+t.proposal.id}},[t._v(" "+t._s(t.percent(t.proposal.tally.yes))+"% voted Yes ")]),o("b-tooltip",{attrs:{target:"vote-no"+t.proposal.id}},[t._v(" "+t._s(t.percent(t.proposal.tally.no))+"% voted No ")]),o("b-tooltip",{attrs:{target:"vote-veto"+t.proposal.id}},[t._v(" "+t._s(t.percent(t.proposal.tally.veto))+"% voted No With Veto ")]),o("b-tooltip",{attrs:{target:"vote-abstain"+t.proposal.id}},[t._v(" "+t._s(t.percent(t.proposal.tally.abstain))+"% voted Abstain ")]),t.votes.votes&&t.votes.votes.length>0?o("b-table",{attrs:{stacked:"sm",fields:t.votes_fields,items:t.votes.votes,striped:""},scopedSlots:t._u([{key:"cell(voter)",fn:function(e){return[o("router-link",{attrs:{to:"../account/"+e.item.voter}},[t._v(" "+t._s(t.formatAddress(e.item.voter))+" ")])]}}],null,!1,2285669664)}):t._e(),t.next?o("div",{staticClass:"addzone text-center pt-50 pb-50 bg-transparent text-primary",on:{click:function(e){return t.loadVotes()}}},[o("feather-icon",{attrs:{icon:"PlusIcon"}}),t._v(" Load More Votes ")],1):t._e()],1)],1),t.proposal.total_deposit?o("b-card",{attrs:{"no-body":""}},[o("b-card-header",[o("b-card-title",[t._v(" Deposits ("+t._s(t.formatToken(t.proposal.total_deposit))+") ")])],1),o("b-card-body",[Array.isArray(t.deposits.deposits||t.deposits)?o("b-table",{attrs:{stacked:"sm",items:t.deposits.deposits||t.deposits,fields:t.deposit_fields,striped:""},scopedSlots:t._u([{key:"cell(depositor)",fn:function(e){return[o("router-link",{attrs:{to:"../account/"+e.item.depositor}},[t._v(" "+t._s(t.formatAddress(e.item.depositor))+" ")])]}}],null,!1,2408756791)}):t._e()],1),o("b-card-footer",[o("router-link",{attrs:{to:t.from}},[o("b-button",{attrs:{variant:"outline-primary"}},[t._v(" "+t._s(t.$t("btn_back_list"))+" ")])],1),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"btn float-right mg-2",attrs:{disabled:1!=t.proposal.status,variant:"primary"},on:{click:function(e){return t.openModal("GovDeposit")}}},[t._v(" "+t._s(t.$t("btn_deposit"))+" ")]),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"btn float-right mg-2 mr-1",attrs:{disabled:2!=t.proposal.status,variant:"primary"},on:{click:function(e){return t.openModal("Vote")}}},[t._v(" "+t._s(t.$t("btn_vote"))+" ")])],1)],1):t._e(),o("operation-modal",{attrs:{type:t.operationModalType,"proposal-id":Number(t.proposal.id),"proposal-title":t.proposal.title}})],1)},a=[],r=o(8775),i=o(49379),p=o(40670),l=o(37674),n=o(15193),d=o(13170),c=o(85589),b=o(87047),_=o(92095),m=o(66456),v=o(22981),u=o(45752),h=o(18365),g=o(26034),f=o(65167),y=o.n(f),k=o(99546),T=o(72272),x=o(27484),$=o.n(x),w=o(8086),B=o(77778),O={components:{BCard:r._,BCardTitle:i._,BCardBody:p.O,BCardFooter:l.F,BButton:n.T,BTable:d.h,BTableSimple:c.t,BCardHeader:b.p,BTr:_.G,BTd:m.S,BProgressBar:v.Q,BProgress:u.D,BTooltip:h.T,BBadge:g.k,ObjectFieldComponent:B.Z,FlipCountdown:y(),OperationModal:w.Z},data(){return{latest:{},next:null,proposal:new T.rU,proposer:new T.cO,deposits:[],votes:[],operationModalType:"",from:"../gov",votes_fields:[{key:"voter",sortable:!0,formatter:t=>this.formatAddress(t)},{key:"option",sortable:!0,formatter:t=>{switch(t){case 1:case"VOTE_OPTION_YES":return"Yes";case 2:case"VOTE_OPTION_ABSTAIN":return"Abstain";case 3:case"VOTE_OPTION_NO":return"No";case 4:case"VOTE_OPTION_NO_WITH_VETO":return"No With Veto";default:return t}}}],deposit_fields:[{key:"depositor",formatter:t=>this.formatAddress(t)},{key:"amount",sortable:!0,formatter:k.tokenFormatter}]}},computed:{upgradeTime(){if(this.proposal.type.indexOf("SoftwareUpgrade")>0){if(Number(this.proposal?.contents.plan.height||0)>0&&this.latest?.block){const t=Number(this.proposal.contents.plan.height)-Number(this.latest.block?.header?.height||0);if(t>0){const e=$()().add(6*t,"second").format("YYYY-MM-DD HH:mm:ss");return e}}return $()(this.proposal.contents.plan.time).format("YYYY-MM-DD HH:mm:ss")}return"0001-01-01 00:00:00"}},created(){const t=this.$route.params.proposalid;this.$route.query.from&&(this.from=this.$route.query.from),this.$http.getLatestBlock().then((t=>{this.latest=t})),this.$http.getGovernance(t).then((e=>{2===e.status&&this.$http.getGovernanceTally(t,0).then((t=>e.updateTally(t))),this.proposal=e})),(0,k.getCachedValidators)()||this.$http.getValidatorList(),this.$http.getGovernanceProposer(t).then((t=>{this.proposer=t})),this.$http.getGovernanceDeposits(t).then((t=>{this.deposits=t})).catch((()=>{})),this.$http.getGovernanceVotes(t).then((t=>{this.votes=t,this.next=t.pagination?t.pagination.next_key:null}))},methods:{percent:t=>(0,k.percent)(t),formatDate:t=>$()(t).format("YYYY-MM-DD HH:mm"),formatToken:t=>(0,k.tokenFormatter)(t,{}),loadVotes(){if(this.next){const t=this.$route.params.proposalid,{next:e}=this;this.next=null,this.$http.getGovernanceVotes(t,e).then((t=>{this.$set(this.votes,"votes",this.votes.votes.concat(t.votes)),this.next=t.pagination?t.pagination.next_key:null}))}},formatAddress(t){return(0,k.getStakingValidatorByAccount)(this.$http.config.chain_name,t)},openModal(t){this.operationModalType=t}}},C=O,V=o(43736),N=(0,V.Z)(C,s,a,!1,null,null,null),D=N.exports}}]);