(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[809],{5809:function(t,a,s){"use strict";s.r(a),s.d(a,{default:function(){return at}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("b-card",{staticClass:"border-primary"},[s("b-row",[s("b-col",{staticClass:"d-flex justify-content-between flex-column",attrs:{cols:"21",xl:"6"}},[s("div",{staticClass:"d-flex justify-content-start"},[s("b-avatar",{attrs:{src:t.validator.avatar,variant:"light-primary",size:"104px",rounded:""}}),s("div",{staticClass:"d-flex flex-column ml-1"},[s("div",{staticClass:"mb-1"},[s("h4",{staticClass:"mb-0"},[t._v(" "+t._s(t.validator.description.moniker)+" ")]),s("span",{staticClass:"card-text"},[t._v(t._s(t.validator.description.website))])]),s("div",{staticClass:"d-flex flex-wrap"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"mr-25 mb-25",attrs:{variant:"primary"}},[t._v(" Delegate ")])],1)])],1),s("div",{staticClass:"d-flex flex-wrap align-items-center mt-2"},[s("div",{staticClass:"d-flex align-items-center mr-2"},[s("b-avatar",{attrs:{variant:"light-primary",rounded:""}},[s("feather-icon",{attrs:{icon:"DiscIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.tokenFormatter(t.validator.tokens))+" ")]),s("small",[t._v("Bonded Tokens")])])],1),s("div",{staticClass:"d-flex align-items-center mr-2"},[s("b-avatar",{attrs:{variant:"light-warning",rounded:""}},[s("feather-icon",{attrs:{icon:"DivideCircleIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.percentFormat(t.selfDelegation.balance.amount/t.validator.tokens))+"% ")]),s("small",[t._v("Self Delegation")])])],1),t.mintInflation?s("div",{staticClass:"d-flex align-items-center"},[s("b-avatar",{attrs:{variant:"light-success",rounded:""}},[s("feather-icon",{attrs:{icon:"TrendingUpIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.apr(t.validator.commission.rate))+" ")]),s("small",[t._v("Annual Profit")])])],1):t._e()])]),s("b-col",{attrs:{cols:"12",xl:"6"}},[s("table",{staticClass:"mt-2 mt-xl-0 w-100"},[s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Identity")])],1),s("td",{staticClass:"pb-50"},[s("small",[t._v(t._s(t.validator.description.identity||"-"))])])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"CheckIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Status")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[s("span",[t._v(t._s(String(t.validator.status).replace("BOND_STATUS_","")))])])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Unbond Height")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[t._v(" "+t._s(t.validator.unbonding_height||"-")+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Unbond Time")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[t._v(" "+t._s(t.timeFormat(t.validator.unbonding_time))+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"FlagIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Min Self Delegation")])],1),s("td",{staticClass:"pb-50"},[t._v(" "+t._s(parseFloat(t.validator.min_self_delegation))+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"AlertCircleIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Jailed")])],1),s("td",{staticClass:"pb-50"},[t._v(" "+t._s(t.validator.jailed||"-")+" ")])]),s("tr",[s("th",[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"PhoneIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Contact")])],1),s("td",[t._v(" "+t._s(t.validator.security_contact||"-")+" ")])])])])],1),t.validator.description.details?s("b-card-footer",{staticClass:"mt-1 pl-0 pr-0"},[t._v(" "+t._s(t.validator.description.details||"")+" ")]):t._e()],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-commission-component",{attrs:{data:t.validator.commission}})],1),s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-reward-component",{attrs:{data:t.distribution,validator:t.validator.operator_address,address:t.accountAddress}})],1),s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-address-component",{attrs:{"hex-address":t.hexAddress,"operator-address":t.validator.operator_address,"consensus-pubkey":t.validator.consensus_pubkey,"account-address":t.accountAddress}})],1)],1),s("b-row",[s("b-col",[s("b-card",{attrs:{title:"Transactions"}},[s("b-table",{attrs:{items:t.txs,striped:"",hover:"",responsive:"sm",stacked:"sm"},scopedSlots:t._u([{key:"cell(height)",fn:function(a){return[s("router-link",{attrs:{to:"../blocks/"+a.item.height}},[t._v(" "+t._s(a.item.height)+" ")])]}},{key:"cell(txhash)",fn:function(a){return[s("router-link",{attrs:{to:"../tx/"+a.item.txhash}},[t._v(" "+t._s(t.formatHash(a.item.txhash))+" ")])]}}])}),Number(t.transactions.page_total)>1?s("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":t.transactions.total_count,"per-page":t.transactions.limit,value:t.transactions.page_number},on:{change:t.pageload}}):t._e()],1)],1)],1),s("operation-modal",{attrs:{type:"Delegate","validator-address":t.validator.operator_address}}),s("div",{attrs:{id:"txevent"}})],1)},i=[],r=(s(21249),s(91038),s(78783),s(82481),s(9653),s(82526),s(41817),s(69826),s(41539),s(8775)),n=s(15193),o=s(26253),d=s(50725),c=s(75200),l=s(37674),m=s(26034),u=s(61081),h=s(13170),b=s(82653),p=s(5870),f=s(99546),v=s(53945),g=s(8086),_=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{staticClass:"align-items-stretch ",attrs:{title:"Address"}},[s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"UserIcon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Account Address ")]),s("router-link",{attrs:{to:"../account/"+t.accountAddress}},[s("small",[t._v(t._s(t.accountAddress))])])],1)],1),s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"Link2Icon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Validator Address ")]),s("small",{on:{click:function(a){return t.copy(t.operatorAddress)}}},[t._v(t._s(t.operatorAddress))])])],1),s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"KeyIcon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Consensus Public Address ")]),s("small",{on:{click:function(a){t.copy(JSON.stringify(t.consensusPubkey))}}},[t._v(t._s(t.consensusPubkey))])])],1),s("b-media",{staticClass:"mb-1 text-truncate",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"HashIcon",size:"18"}})],1)],1),s("b-media-body",[s("h6",{staticClass:"mb-0"},[t._v(" Hex Address ")]),s("small",{on:{click:function(a){return t.copy(t.hexAddress)}}},[t._v(t._s(t.hexAddress))])])],1)],1)},C=[],y=s(72775),x=s(87272),k=s(81843),w=s(67286),B={components:{BCard:r._,BAvatar:c.SH,BMedia:y.P,BMediaAside:x.D,BMediaBody:k.D,ToastificationContent:w.Z},directives:{"b-tooltip":p.o},props:{operatorAddress:{type:String,default:"-"},accountAddress:{type:String,default:"-"},consensusPubkey:{type:[Object,String],required:!0},hexAddress:{type:String,default:"-"}},methods:{copy:function(t){var a=this;this.$copyText(t).then((function(){a.$toast({component:w.Z,props:{title:"Address copied",icon:"BellIcon"}})}),(function(t){a.$toast({component:w.Z,props:{title:"Failed to copy address! ".concat(t),icon:"BellIcon",variant:"danger"}})}))}}},A=B,S=s(43736),I=(0,S.Z)(A,_,C,!1,null,"4577dbe3",null),D=I.exports,T=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{attrs:{"no-body":""}},[s("b-card-header",[s("h4",{staticClass:"mb-0"},[t._v(" Commission ")]),s("b-card-text",{staticClass:"font-small-5 mb-0"},[t._v(" Updated on "+t._s(t.dateFormat(t.data.update_time))+" ")])],1),s("vue-apex-charts",{staticClass:"my-2",attrs:{type:"radialBar",height:"145",options:t.goalOverviewRadialBar,series:[t.percentFormat(t.data.rate)]}}),s("b-row",{staticClass:"text-center mx-0"},[s("b-col",{staticClass:"border-top border-right d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Max Rate ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(t.percentFormat(t.data.max_rate))+"% ")])],1),s("b-col",{staticClass:"border-top d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Max Change Rate ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(t.percentFormat(t.data.max_change_rate))+"% ")])],1)],1)],1)},z=[],$=s(87047),F=s(64206),P=s(67166),M=s.n(P),O=s(71082),H="#ebe9f1",N="#5e5873",R="#51e5a8",W={components:{VueApexCharts:M(),BCard:r._,BCardHeader:$.p,BRow:o.T,BCardText:F.j,BCol:d.l},props:{data:{type:Object,default:function(){}}},data:function(){return{goalOverviewRadialBar:{chart:{height:105,type:"radialBar",sparkline:{enabled:!0},dropShadow:{enabled:!0,blur:3,left:1,top:1,opacity:.1}},colors:[R],plotOptions:{radialBar:{offsetY:-10,startAngle:-150,endAngle:150,hollow:{size:"60%"},track:{background:H,strokeWidth:"80%"},dataLabels:{name:{show:!1},value:{color:N,fontSize:"2.86rem",fontWeight:"600"}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:[O.jS.success],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},grid:{padding:{bottom:10}}}}},methods:{dateFormat:function(t){return(0,f.toDay)(t)},percentFormat:function(t){return(0,f.percent)(t)}}},Z=W,j=(0,S.Z)(Z,T,z,!1,null,null,null),U=j.exports,E=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{staticClass:"card-transaction",attrs:{"no-body":""}},[s("b-card-header",[s("b-card-title",[t._v("Outstanding Rewards")]),s("feather-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.WithdrawCommission",modifiers:{WithdrawCommission:!0}}],staticClass:"cursor-pointer",attrs:{icon:"MoreVerticalIcon",size:"18"}})],1),s("b-card-body",{staticClass:"overflow-auto",staticStyle:{"max-height":"220px"}},[t._l(t.data.self_bond_rewards,(function(a){return s("div",{key:a.amount,staticClass:"transaction-item"},[s("b-media",{attrs:{"no-body":""}},[s("b-media-aside",[s("b-avatar",{attrs:{rounded:"",size:"42",variant:"light-success",text:"R",title:"Rewards"}})],1),s("b-media-body",[s("h6",{staticClass:"transaction-title"},[t._v(" "+t._s(t.formatDenom(a))+" ")]),s("small",[t._v(t._s(t.formatNumber(a.amount)))])])],1),s("small",{staticClass:"text-success d-none d-xl-block "},[t._v(" Reward ")])],1)})),t._l(t.data.val_commission,(function(a){return s("div",{key:a.amount,staticClass:"transaction-item"},[s("b-media",{attrs:{"no-body":""}},[s("b-media-aside",[s("b-avatar",{attrs:{rounded:"",size:"42",variant:"light-primary",text:"C",title:"Commission"}})],1),s("b-media-body",[s("h6",{staticClass:"transaction-title"},[t._v(" "+t._s(t.formatDenom(a))+" ")]),s("small",[t._v(t._s(t.formatNumber(a.amount)))])])],1),s("small",{staticClass:"text-primary d-none d-xl-block"},[t._v(" Commission ")])],1)}))],2),s("b-card-body",{staticClass:"pt-0"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.WithdrawCommission",modifiers:{WithdrawCommission:!0}}],attrs:{block:"",size:"sm",variant:"primary"}},[t._v(" Withdraw Commission ")])],1),s("operation-modal",{attrs:{type:"WithdrawCommission","modal-id":"WithdrawCommission",address:t.address,"validator-address":t.validator}})],1)},V=[],q=(s(56977),s(49379)),L=s(40670),J={components:{BButton:n.T,BCard:r._,BCardHeader:$.p,BCardTitle:q._,BCardBody:L.O,BMediaBody:k.D,BMedia:y.P,BMediaAside:x.D,BAvatar:c.SH,OperationModal:g.Z},props:{data:{type:Object,required:!0},validator:{type:String,required:!0},address:{type:String,required:!0}},data:function(){return{}},computed:{denoms:function(){return this.$store.state.chains.denoms}},methods:{formatNumber:function(t){return t<1?t:t.indexOf(".")>0?(0,f.numberWithCommas)(BigInt(t.substring(0,t.indexOf(".")))):(0,f.numberWithCommas)(BigInt(Number(t).toFixed(0)))},formatDenom:function(t){return(0,f.formatToken)(t,this.denoms,2)}}},K=J,Y=(0,S.Z)(K,E,V,!1,null,null,null),G=Y.exports,Q={components:{BCard:r._,BButton:n.T,BRow:o.T,BCol:d.l,BAvatar:c.SH,BCardFooter:l.F,BBadge:m.k,BPagination:u.c,BTable:h.h,StakingAddressComponent:D,StakingCommissionComponent:U,StakingRewardComponent:G,OperationModal:g.Z},directives:{"b-modal":b.T,"b-tooltip":p.o},data:function(){return{commission:{series:[90],completed:89,inProgress:64},selfDelegation:{balance:{amount:0}},latestHeight:0,accountAddress:"-",hexAddress:"-",stakingPool:{},mintInflation:0,stakingParameter:new f.StakingParameters,validator:new f.Validator,address:null,userData:{},blocks:Array.from("0".repeat(100)).map((function(t){return[Boolean(t),Number(t)]})),distribution:{},transactions:{}}},computed:{txs:function(){return this.transactions.txs?this.transactions.tx_responses.map((function(t){return{height:Number(t.height),txhash:t.txhash,msgs:(0,f.abbrMessage)(t.tx.body.messages),time:(0,f.toDay)(t.timestamp)}})):[]}},created:function(){var t=this;this.$http.getStakingPool().then((function(a){t.stakingPool=a})),this.$http.getStakingParameters().then((function(a){t.stakingParameter=a})),this.$http.getMintingInflation().then((function(a){t.mintInflation=a})),this.address=this.$route.params.address,this.initial()},mounted:function(){var t=this,a=document.getElementById("txevent");a.addEventListener("txcompleted",(function(){t.initial()}))},methods:{initial:function(){var t=this;this.$http.getStakingValidator(this.address).then((function(a){t.validator=a,t.processAddress(a.operator_address,a.consensus_pubkey),t.$http.getTxsBySender(t.accountAddress).then((function(a){t.transactions=a}));var s=a.description.identity;(0,v.i)(s).then((function(a){Array.isArray(a.them)&&a.them.length>0&&(t.$set(t.validator,"avatar",a.them[0].pictures.primary.url),t.$store.commit("cacheAvatar",{identity:s,url:a.them[0].pictures.primary.url}))}))})),this.$http.getValidatorDistribution(this.address).then((function(a){t.distribution=a}))},pageload:function(t){var a=this;this.$http.getTxsBySender(this.accountAddress,t).then((function(t){a.transactions=t}))},formatHash:f.abbrAddress,timeFormat:function(t){return(0,f.toDay)(t)},percentFormat:function(t){return(0,f.percent)(t)},processAddress:function(t,a){var s=this;this.accountAddress=(0,f.operatorAddressToAccount)(t),this.hexAddress=(0,f.consensusPubkeyToHexAddress)(a),this.$http.getStakingDelegatorDelegation(this.accountAddress,t).then((function(t){s.selfDelegation=t}))},tokenFormatter:function(t){return(0,f.formatToken)({amount:t,denom:this.stakingParameter.bond_denom})},apr:function(t){return"".concat((0,f.percent)((1-t)*this.mintInflation)," %")},fetch_status:function(t,a){var s=this;return this.$http.getBlockByHeight(t[1]).then((function(e){if(t[1]!==a){var i=e.block.last_commit.signatures.find((function(t){return t.validator_address===s.hexAddress})),r=s.blocks.find((function(a){return a[1]===t[1]}));"undefined"!==typeof r&&s.$set(r,0,"undefined"!==typeof i)}}))},fetch_latest:function(){var t=this;this.$http.getLatestBlock().then((function(a){var s=a.block.last_commit.signatures.find((function(a){return a.validator_address===t.hexAddress})),e=t.blocks.find((function(t){return t[1]===a.block.last_commit.height}));"undefined"===typeof e&&(t.blocks.length>999&&t.blocks.shift(),t.blocks.push(["undefined"!==typeof s,a.block.last_commit.height]))}))}}},X=Q,tt=(0,S.Z)(X,e,i,!1,null,null,null),at=tt.exports},82481:function(t,a,s){var e=s(82109),i=s(38415);e({target:"String",proto:!0},{repeat:i})}}]);