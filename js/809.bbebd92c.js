"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[809],{5809:function(t,a,s){s.r(a),s.d(a,{default:function(){return at}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("b-card",{staticClass:"border-primary"},[s("b-row",[s("b-col",{staticClass:"d-flex justify-content-between flex-column",attrs:{cols:"21",xl:"6"}},[s("div",{staticClass:"d-flex justify-content-start"},[s("b-avatar",{attrs:{src:t.validator.avatar,variant:"light-primary",size:"104px",rounded:""}}),s("div",{staticClass:"d-flex flex-column ml-1"},[s("div",{staticClass:"mb-1"},[s("h4",{staticClass:"mb-0"},[t._v(" "+t._s(t.validator.description.moniker)+" ")]),s("span",{staticClass:"card-text"},[t._v(t._s(t.validator.description.website))])]),s("div",{staticClass:"d-flex flex-wrap"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.operation-modal",modifiers:{"operation-modal":!0}}],staticClass:"mr-25 mb-25",attrs:{variant:"primary"}},[t._v(" Delegate ")])],1)])],1),s("div",{staticClass:"d-flex flex-wrap align-items-center mt-2"},[s("div",{staticClass:"d-flex align-items-center mr-2"},[s("b-avatar",{attrs:{variant:"light-primary",rounded:""}},[s("feather-icon",{attrs:{icon:"DiscIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.tokenFormatter(t.validator.tokens))+" ")]),s("small",[t._v("Bonded Tokens")])])],1),s("div",{staticClass:"d-flex align-items-center mr-2"},[s("b-avatar",{attrs:{variant:"light-warning",rounded:""}},[s("feather-icon",{attrs:{icon:"DivideCircleIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.percentFormat(t.selfDelegation.balance.amount/t.validator.tokens))+"% ")]),s("small",[t._v("Self Delegation")])])],1),t.mintInflation?s("div",{staticClass:"d-flex align-items-center"},[s("b-avatar",{attrs:{variant:"light-success",rounded:""}},[s("feather-icon",{attrs:{icon:"TrendingUpIcon",size:"18"}})],1),s("div",{staticClass:"ml-1"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.apr(t.validator.commission.rate))+" ")]),s("small",[t._v("Annual Profit")])])],1):t._e()])]),s("b-col",{attrs:{cols:"12",xl:"6"}},[s("table",{staticClass:"mt-2 mt-xl-0 w-100"},[s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Identity")])],1),s("td",{staticClass:"pb-50"},[s("small",[t._v(t._s(t.validator.description.identity||"-"))])])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"CheckIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Status")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[s("span",[t._v(t._s(String(t.validator.status).replace("BOND_STATUS_","")))])])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Unbond Height")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[t._v(" "+t._s(t.validator.unbonding_height||"-")+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Unbond Time")])],1),s("td",{staticClass:"pb-50 text-capitalize"},[t._v(" "+t._s(t.timeFormat(t.validator.unbonding_time))+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"FlagIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Min Self Delegation")])],1),s("td",{staticClass:"pb-50"},[t._v(" "+t._s(parseFloat(t.validator.min_self_delegation))+" ")])]),s("tr",[s("th",{staticClass:"pb-50"},[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"AlertCircleIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Jailed")])],1),s("td",{staticClass:"pb-50"},[t._v(" "+t._s(t.validator.jailed||"-")+" ")])]),s("tr",[s("th",[s("feather-icon",{staticClass:"mr-75",attrs:{icon:"PhoneIcon"}}),s("span",{staticClass:"font-weight-bold"},[t._v("Contact")])],1),s("td",[t._v(" "+t._s(t.validator.security_contact||"-")+" ")])])])])],1),t.validator.description.details?s("b-card-footer",{staticClass:"mt-1 pl-0 pr-0"},[t._v(" "+t._s(t.validator.description.details||"")+" ")]):t._e()],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-commission-component",{attrs:{data:t.validator.commission}})],1),s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-reward-component",{attrs:{data:t.distribution,validator:t.validator.operator_address,address:t.accountAddress}})],1),s("b-col",{attrs:{lg:"4",md:"12"}},[s("staking-address-component",{attrs:{"hex-address":t.hexAddress,"operator-address":t.validator.operator_address,"consensus-pubkey":t.validator.consensus_pubkey,"account-address":t.accountAddress}})],1)],1),s("b-row",[s("b-col",[s("b-card",{attrs:{title:"Transactions"}},[s("b-table",{attrs:{items:t.txs,striped:"",hover:"",responsive:"sm",stacked:"sm"},scopedSlots:t._u([{key:"cell(height)",fn:function(a){return[s("router-link",{attrs:{to:"../blocks/"+a.item.height}},[t._v(" "+t._s(a.item.height)+" ")])]}},{key:"cell(txhash)",fn:function(a){return[s("router-link",{attrs:{to:"../tx/"+a.item.txhash}},[t._v(" "+t._s(t.formatHash(a.item.txhash))+" ")])]}}])}),Number(t.transactions.page_total)>1?s("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":t.transactions.total_count,"per-page":t.transactions.limit,value:t.transactions.page_number},on:{change:t.pageload}}):t._e()],1)],1)],1),s("operation-modal",{attrs:{type:"Delegate","validator-address":t.validator.operator_address}}),s("div",{attrs:{id:"txevent"}})],1)},i=[],r=s(8775),o=s(15193),n=s(26253),d=s(50725),l=s(75200),c=s(37674),m=s(26034),h=s(61081),b=s(13170),p=s(82653),u=s(5870),v=s(99546),g=s(53945),_=s(8086),C=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{staticClass:"align-items-stretch ",attrs:{title:"Address"}},[s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"UserIcon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Account Address ")]),s("router-link",{attrs:{to:"../account/"+t.accountAddress}},[s("small",[t._v(t._s(t.accountAddress))])])],1)],1),s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"Link2Icon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Validator Address ")]),s("small",{on:{click:function(a){return t.copy(t.operatorAddress)}}},[t._v(t._s(t.operatorAddress))])])],1),s("b-media",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"KeyIcon",size:"18"}})],1)],1),s("b-media-body",{staticClass:"text-truncate"},[s("h6",{staticClass:"mb-0"},[t._v(" Consensus Public Address ")]),s("small",{on:{click:function(a){t.copy(JSON.stringify(t.consensusPubkey))}}},[t._v(t._s(t.consensusPubkey))])])],1),s("b-media",{staticClass:"mb-1 text-truncate",attrs:{"no-body":""}},[s("b-media-aside",{staticClass:"mr-1"},[s("b-avatar",{attrs:{rounded:"",variant:"light-primary",size:"34"}},[s("feather-icon",{attrs:{icon:"HashIcon",size:"18"}})],1)],1),s("b-media-body",[s("h6",{staticClass:"mb-0"},[t._v(" Hex Address ")]),s("small",{on:{click:function(a){return t.copy(t.hexAddress)}}},[t._v(t._s(t.hexAddress))])])],1)],1)},f=[],y=s(72775),x=s(87272),k=s(81843),w=s(67286),B={components:{BCard:r._,BAvatar:l.SH,BMedia:y.P,BMediaAside:x.D,BMediaBody:k.D,ToastificationContent:w.Z},directives:{"b-tooltip":u.o},props:{operatorAddress:{type:String,default:"-"},accountAddress:{type:String,default:"-"},consensusPubkey:{type:[Object,String],required:!0},hexAddress:{type:String,default:"-"}},methods:{copy(t){this.$copyText(t).then((()=>{this.$toast({component:w.Z,props:{title:"Address copied",icon:"BellIcon"}})}),(t=>{this.$toast({component:w.Z,props:{title:`Failed to copy address! ${t}`,icon:"BellIcon",variant:"danger"}})}))}}},A=B,S=s(43736),I=(0,S.Z)(A,C,f,!1,null,"4577dbe3",null),D=I.exports,T=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{attrs:{"no-body":""}},[s("b-card-header",[s("h4",{staticClass:"mb-0"},[t._v(" Commission ")]),s("b-card-text",{staticClass:"font-small-5 mb-0"},[t._v(" Updated on "+t._s(t.dateFormat(t.data.update_time))+" ")])],1),s("vue-apex-charts",{staticClass:"my-2",attrs:{type:"radialBar",height:"145",options:t.goalOverviewRadialBar,series:[t.percentFormat(t.data.rate)]}}),s("b-row",{staticClass:"text-center mx-0"},[s("b-col",{staticClass:"border-top border-right d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Max Rate ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(t.percentFormat(t.data.max_rate))+"% ")])],1),s("b-col",{staticClass:"border-top d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Max Change Rate ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(t.percentFormat(t.data.max_change_rate))+"% ")])],1)],1)],1)},$=[],z=s(87047),F=s(64206),P=s(67166),M=s.n(P),O=s(71082);const H="#ebe9f1",N="#5e5873",R="#51e5a8";var W={components:{VueApexCharts:M(),BCard:r._,BCardHeader:z.p,BRow:n.T,BCardText:F.j,BCol:d.l},props:{data:{type:Object,default:()=>{}}},data(){return{goalOverviewRadialBar:{chart:{height:105,type:"radialBar",sparkline:{enabled:!0},dropShadow:{enabled:!0,blur:3,left:1,top:1,opacity:.1}},colors:[R],plotOptions:{radialBar:{offsetY:-10,startAngle:-150,endAngle:150,hollow:{size:"60%"},track:{background:H,strokeWidth:"80%"},dataLabels:{name:{show:!1},value:{color:N,fontSize:"2.86rem",fontWeight:"600"}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:[O.jS.success],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},grid:{padding:{bottom:10}}}}},methods:{dateFormat(t){return(0,v.toDay)(t)},percentFormat(t){return(0,v.percent)(t)}}},Z=W,j=(0,S.Z)(Z,T,$,!1,null,null,null),U=j.exports,E=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("b-card",{staticClass:"card-transaction",attrs:{"no-body":""}},[s("b-card-header",[s("b-card-title",[t._v("Outstanding Rewards")]),s("feather-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.WithdrawCommission",modifiers:{WithdrawCommission:!0}}],staticClass:"cursor-pointer",attrs:{icon:"MoreVerticalIcon",size:"18"}})],1),s("b-card-body",{staticClass:"overflow-auto",staticStyle:{"max-height":"220px"}},[t._l(t.data.self_bond_rewards,(function(a){return s("div",{key:a.amount,staticClass:"transaction-item"},[s("b-media",{attrs:{"no-body":""}},[s("b-media-aside",[s("b-avatar",{attrs:{rounded:"",size:"42",variant:"light-success",text:"R",title:"Rewards"}})],1),s("b-media-body",[s("h6",{staticClass:"transaction-title"},[t._v(" "+t._s(t.formatDenom(a))+" ")]),s("small",[t._v(t._s(t.formatNumber(a.amount)))])])],1),s("small",{staticClass:"text-success d-none d-xl-block "},[t._v(" Reward ")])],1)})),t._l(t.data.val_commission,(function(a){return s("div",{key:a.amount,staticClass:"transaction-item"},[s("b-media",{attrs:{"no-body":""}},[s("b-media-aside",[s("b-avatar",{attrs:{rounded:"",size:"42",variant:"light-primary",text:"C",title:"Commission"}})],1),s("b-media-body",[s("h6",{staticClass:"transaction-title"},[t._v(" "+t._s(t.formatDenom(a))+" ")]),s("small",[t._v(t._s(t.formatNumber(a.amount)))])])],1),s("small",{staticClass:"text-primary d-none d-xl-block"},[t._v(" Commission ")])],1)}))],2),s("b-card-body",{staticClass:"pt-0"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.WithdrawCommission",modifiers:{WithdrawCommission:!0}}],attrs:{block:"",size:"sm",variant:"primary"}},[t._v(" Withdraw Commission ")])],1),s("operation-modal",{attrs:{type:"WithdrawCommission","modal-id":"WithdrawCommission",address:t.address,"validator-address":t.validator}})],1)},V=[],q=s(49379),L=s(40670),J={components:{BButton:o.T,BCard:r._,BCardHeader:z.p,BCardTitle:q._,BCardBody:L.O,BMediaBody:k.D,BMedia:y.P,BMediaAside:x.D,BAvatar:l.SH,OperationModal:_.Z},props:{data:{type:Object,required:!0},validator:{type:String,required:!0},address:{type:String,required:!0}},data(){return{}},computed:{denoms(){return this.$store.state.chains.denoms}},methods:{formatNumber(t){return t<1?t:t.indexOf(".")>0?(0,v.numberWithCommas)(BigInt(t.substring(0,t.indexOf(".")))):(0,v.numberWithCommas)(BigInt(Number(t).toFixed(0)))},formatDenom(t){return(0,v.formatToken)(t,this.denoms,2)}}},K=J,Y=(0,S.Z)(K,E,V,!1,null,null,null),G=Y.exports,Q={components:{BCard:r._,BButton:o.T,BRow:n.T,BCol:d.l,BAvatar:l.SH,BCardFooter:c.F,BBadge:m.k,BPagination:h.c,BTable:b.h,StakingAddressComponent:D,StakingCommissionComponent:U,StakingRewardComponent:G,OperationModal:_.Z},directives:{"b-modal":p.T,"b-tooltip":u.o},data(){return{commission:{series:[90],completed:89,inProgress:64},selfDelegation:{balance:{amount:0}},latestHeight:0,accountAddress:"-",hexAddress:"-",stakingPool:{},mintInflation:0,stakingParameter:new v.StakingParameters,validator:new v.Validator,address:null,userData:{},blocks:Array.from("0".repeat(100)).map((t=>[Boolean(t),Number(t)])),distribution:{},transactions:{}}},computed:{txs(){return this.transactions.txs?this.transactions.tx_responses.map((t=>({height:Number(t.height),txhash:t.txhash,msgs:(0,v.abbrMessage)(t.tx.body.messages),time:(0,v.toDay)(t.timestamp)}))):[]}},created(){this.$http.getStakingPool().then((t=>{this.stakingPool=t})),this.$http.getStakingParameters().then((t=>{this.stakingParameter=t})),this.$http.getMintingInflation().then((t=>{this.mintInflation=t})),this.address=this.$route.params.address,this.initial()},mounted(){const t=document.getElementById("txevent");t.addEventListener("txcompleted",(()=>{this.initial()}))},methods:{initial(){this.$http.getStakingValidator(this.address).then((t=>{this.validator=t,this.processAddress(t.operator_address,t.consensus_pubkey),this.$http.getTxsBySender(this.accountAddress).then((t=>{this.transactions=t}));const{identity:a}=t.description;(0,g.i)(a).then((t=>{Array.isArray(t.them)&&t.them.length>0&&(this.$set(this.validator,"avatar",t.them[0].pictures.primary.url),this.$store.commit("cacheAvatar",{identity:a,url:t.them[0].pictures.primary.url}))}))})),this.$http.getValidatorDistribution(this.address).then((t=>{this.distribution=t}))},pageload(t){this.$http.getTxsBySender(this.accountAddress,t).then((t=>{this.transactions=t}))},formatHash:v.abbrAddress,timeFormat(t){return(0,v.toDay)(t)},percentFormat(t){return(0,v.percent)(t)},processAddress(t,a){this.accountAddress=(0,v.operatorAddressToAccount)(t),this.hexAddress=(0,v.consensusPubkeyToHexAddress)(a),this.$http.getStakingDelegatorDelegation(this.accountAddress,t).then((t=>{this.selfDelegation=t}))},tokenFormatter(t){return(0,v.formatToken)({amount:t,denom:this.stakingParameter.bond_denom})},apr(t){return`${(0,v.percent)((1-t)*this.mintInflation)} %`},fetch_status(t,a){return this.$http.getBlockByHeight(t[1]).then((s=>{if(t[1]!==a){const a=s.block.last_commit.signatures.find((t=>t.validator_address===this.hexAddress)),e=this.blocks.find((a=>a[1]===t[1]));"undefined"!==typeof e&&this.$set(e,0,"undefined"!==typeof a)}}))},fetch_latest(){this.$http.getLatestBlock().then((t=>{const a=t.block.last_commit.signatures.find((t=>t.validator_address===this.hexAddress)),s=this.blocks.find((a=>a[1]===t.block.last_commit.height));"undefined"===typeof s&&(this.blocks.length>999&&this.blocks.shift(),this.blocks.push(["undefined"!==typeof a,t.block.last_commit.height]))}))}}},X=Q,tt=(0,S.Z)(X,e,i,!1,null,null,null),at=tt.exports}}]);